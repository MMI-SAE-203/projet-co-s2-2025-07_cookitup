---
// ✅ ADAPTÉE À VOTRE STRUCTURE POCKETBASE
export interface Props {
    id?: string;
    nom?: string; // ← CHANGE: correspond à votre champ "nom"
    img?: string; // ← CHANGE: correspond à votre champ "image"
}

const {
    id = "1",
    nom = "RECETTE FAVORITE",
    img = "/placeholder.svg?height=250&width=200",
} = Astro.props;

// ✅ GESTION DE L'IMAGE POCKETBASE
const imageUrl = img
    ? `http://127.0.0.1:8090/api/files/recettes/${id}/${img}`
    : "/placeholder.svg";
// ← CHANGE: Remplacez par votre URL PocketBase
---

<div
    class="relative min-w-[200px] h-64 rounded-lg overflow-hidden shadow-lg hover:shadow-xl transition-shadow snap-start"
>
    <!-- ✅ UTILISE L'URL POCKETBASE -->
    <img
        src={imageUrl || "/placeholder.svg"}
        alt={nom}
        class="w-full h-full object-cover"
    />
    <div class="absolute inset-0 bg-black bg-opacity-40 flex items-end">
        <div class="p-4 w-full">
            <!-- ✅ UTILISE VOTRE CHAMP "nom" -->
            <h3 class="text-white font-bold text-lg uppercase">{nom}</h3>
        </div>
    </div>

    <!-- ✅ BOUTON FAVORIS -->
    <button
        class="absolute top-2 right-2 bg-white p-2 rounded-full shadow-md hover:bg-gray-100 transition"
        data-favoris-btn
        data-recette-id={id}
    >
        <svg
            class="w-4 h-4 text-red-600"
            fill="red"
            stroke="currentColor"
            viewBox="0 0 24 24"
        >
            <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"
            ></path>
        </svg>
    </button>

    <a
        href={`/recette-plat/${id}`}
        class="absolute inset-0"
        aria-label={`Voir la recette ${nom}`}></a>
</div>
